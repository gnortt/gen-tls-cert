HOME=.

[ ca ]
default_ca=CA_default

[ CA_default ]
dir=$ENV::KEY_DIR
certs=$dir
crl_dir=$dir
database=$dir/index.txt
new_certs_dir=$dir
certificate=$dir/ca.crt
serial=$dir/serial
crl=$dir/crl.pem
private_key=$dir/ca.key
x509_extensions=usr_cert
default_days=365
default_crl_days=365
default_md=sha256
preserve=no
policy=policy_anything

[ policy_anything ]
countryName=optional
stateOrProvinceName=optional
localityName=optional
organizationName=optional
organizationalUnitName=optional
commonName=supplied
name=optional
emailAddress=optional

[ req ]
default_bits=$ENV::KEY_SIZE
default_keyfile=privkey.pem
distinguished_name=req_distinguished_name
x509_extensions=v3_ca
string_mask=nombstr

[ req_distinguished_name ]
commonName=Common Name
commonName_max=64
commonName_default=$ENV::KEY_CN

[ usr_cert ]
basicConstraints=CA:FALSE
subjectKeyIdentifier=hash
authorityKeyIdentifier=keyid,issuer:always
extendedKeyUsage=clientAuth
keyUsage=digitalSignature

[ server ]
basicConstraints=CA:FALSE
nsCertType=server
subjectKeyIdentifier=hash
authorityKeyIdentifier=keyid,issuer:always
extendedKeyUsage=serverAuth
keyUsage=digitalSignature,keyEncipherment

[ v3_req ]
basicConstraints=CA:FALSE
keyUsage=nonRepudiation,digitalSignature,keyEncipherment

[ v3_ca ]
subjectKeyIdentifier=hash
authorityKeyIdentifier=keyid:always,issuer:always
basicConstraints=CA:true

[ crl_ext ]
authorityKeyIdentifier=keyid:always,issuer:always